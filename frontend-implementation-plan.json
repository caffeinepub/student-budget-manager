{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Student Budget Manager — Frontend Implementation",
  "requirements": [
    {
      "id": "REQ-3",
      "summary": "Build Onboarding / Income Setup screen with income source inputs and allocation slider controls",
      "acceptanceCriteria": [
        "Three income source fields render: Pocket Money, Stipend, Part-time Income.",
        "Total income is computed as the sum of all three fields.",
        "Three allocation sliders (Spending, Saving, Investment) always sum to 100%.",
        "Derived amounts (e.g., ₹X for Spending) update in real time as income or sliders change.",
        "A 'Confirm & Save' button persists the income and split to the backend."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/OnboardingScreen.tsx",
          "operation": "create",
          "description": "Create onboarding screen component with three income input fields (Pocket Money, Stipend, Part-time Income) that compute total income. Include three allocation sliders (Spending, Saving, Investment) with live validation ensuring they sum to 100%. Display real-time calculated amounts for each allocation category. Add 'Confirm & Save' button that calls backend addIncome for each source and setAllocationSplit with the chosen percentages. Use the authorization component to ensure user is authenticated before accessing this screen. Reference generated image frontend/public/assets/generated/logo.dim_256x256.png in the header."
        },
        {
          "path": "frontend/src/hooks/useAddIncome.ts",
          "operation": "create",
          "description": "Create React Query mutation hook that calls actor.addIncome(name, amount) for each income source. Handle success and error states. Invalidate 'profile' query on success."
        },
        {
          "path": "frontend/src/hooks/useSetAllocationSplit.ts",
          "operation": "create",
          "description": "Create React Query mutation hook that calls actor.setAllocationSplit(spending, saving, investing) with percentage values. Validate that percentages sum to 100 before calling backend. Invalidate 'profile' query on success."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Add route for OnboardingScreen at /onboarding. Wire it into the React Router configuration. Add logic to redirect to /onboarding if user profile exists but income sources are empty."
        }
      ]
    },
    {
      "id": "REQ-4",
      "summary": "Build Dashboard / Home screen showing income summary, balances, daily spend limit, and recent expenses",
      "acceptanceCriteria": [
        "Dashboard fetches profile and displays three balance cards: Spending, Saving, Investment.",
        "Daily spend limit is prominently displayed under the Spending card.",
        "Savings card shows a lock icon and 'Locked' badge when the Digital Locker is active.",
        "Last 5 expense entries are listed with category icon, amount, and date.",
        "Quick-action buttons navigate to the correct feature screens."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/Dashboard.tsx",
          "operation": "create",
          "description": "Create dashboard component that fetches user profile using getProfile backend method. Display three balance cards for Spending, Saving, and Investment showing derived amounts from allocation percentages and total income. Calculate and display daily spend limit (spending amount divided by days remaining in current month). Show lock icon and 'Locked' badge on Savings card when digitalLocker.locked is true. Render last 5 expense entries from profile.expenses array with category icons, amounts, and formatted dates. Include quick-action buttons: 'Add Expense' (navigates to /expenses), 'View Goals' (navigates to /goals), 'View Investments' (navigates to /invest). Use the authorization component to ensure user is authenticated."
        },
        {
          "path": "frontend/src/hooks/useGetProfile.ts",
          "operation": "create",
          "description": "Create React Query hook that calls actor.getProfile(caller principal) to fetch the complete user profile including income sources, allocation, expenses, savings goals, and digital locker status. Return profile data with proper TypeScript typing from backend interface."
        },
        {
          "path": "frontend/src/components/BalanceCard.tsx",
          "operation": "create",
          "description": "Create reusable balance card component that displays a category title (Spending/Saving/Investment), amount, optional subtitle (e.g., daily limit), and optional lock indicator. Apply consistent card styling with rounded corners and appropriate spacing."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Add route for Dashboard at / (root path). Set Dashboard as the default landing page for authenticated users. Wire navigation from bottom nav bar Dashboard tab to this route."
        }
      ]
    },
    {
      "id": "REQ-5",
      "summary": "Build Expense Tracker screen with expense logging form and history view",
      "acceptanceCriteria": [
        "Expense form includes numeric amount input, category dropdown, and text note field.",
        "Submitting the form calls addExpense and refreshes the list without full page reload.",
        "Expenses are grouped by date (Today, Yesterday, date label).",
        "A progress bar shows used/total spending allocation with color change to amber when >75% used and red when >95% used.",
        "Empty state message renders when no expenses exist."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/ExpenseTracker.tsx",
          "operation": "create",
          "description": "Create expense tracker screen with form containing numeric amount input, category dropdown (Food, Transport, Education, Entertainment, Health, Other), and optional text note field. On submit, call addExpense backend method and refresh expense list. Display full scrollable expense history grouped by date (Today, Yesterday, or formatted date). Show spending progress bar at top indicating percentage of monthly spending allocation used, with color transitions: green (<75%), amber (75-95%), red (>95%). Render empty state with frontend/public/assets/generated/empty-expenses.dim_300x200.png when no expenses exist. Use the authorization component to ensure user is authenticated."
        },
        {
          "path": "frontend/src/hooks/useAddExpense.ts",
          "operation": "create",
          "description": "Create React Query mutation hook that calls actor.addExpense(amount, category, note). Invalidate 'profile' and 'expenses' queries on success to refresh the expense list and balance."
        },
        {
          "path": "frontend/src/hooks/useGetExpenses.ts",
          "operation": "create",
          "description": "Create React Query hook that calls actor.getExpenses() to fetch the full expense history. Return array of Expense objects with proper TypeScript typing."
        },
        {
          "path": "frontend/src/utils/dateGrouping.ts",
          "operation": "create",
          "description": "Create utility functions to group expenses by date labels (Today, Yesterday, or formatted date string). Export groupExpensesByDate function that takes expense array and returns grouped structure."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Add route for ExpenseTracker at /expenses. Wire navigation from bottom nav bar Expenses tab to this route."
        }
      ]
    },
    {
      "id": "REQ-6",
      "summary": "Build Savings Goal Tracker screen with goal creation and management features",
      "acceptanceCriteria": [
        "Create Goal form accepts: goal name, target amount, optional deadline date, and Digital Locker toggle.",
        "Goal card shows name, progress bar (filled %), current amount, target amount, and deadline.",
        "If locker is active, the card displays a lock icon and 'Locked — cannot withdraw' label.",
        "Top Up button opens an amount input and transfers the amount from spending balance to goal.",
        "requestUnlock is called when user taps 'Unlock Goal'; shows success or error message based on backend response."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/SavingsGoalTracker.tsx",
          "operation": "create",
          "description": "Create savings goal tracker screen with form to create new goals (name, target amount, optional deadline, Digital Locker toggle). Display list of goal cards showing name, progress bar (currentAmount/targetAmount %), current vs target amount, and days remaining until deadline. Show lock icon and 'Locked — cannot withdraw' label when goal.locked is true. Include 'Top Up' button that opens amount input dialog and calls updateSavingsGoal to transfer money from spending balance. Add 'Unlock Goal' button that calls requestUnlock backend method with appropriate condition type (goalMet or timePeriod). Show success/error toast messages based on unlock response. Render empty state with frontend/public/assets/generated/empty-goals.dim_300x200.png when no goals exist. Reference frontend/public/assets/generated/locker-illustration.dim_400x300.png in Digital Locker explanation section. Use the authorization component to ensure user is authenticated."
        },
        {
          "path": "frontend/src/hooks/useAddSavingsGoal.ts",
          "operation": "create",
          "description": "Create React Query mutation hook that calls actor.addSavingsGoal(name, target, deadline) to create a new savings goal. Invalidate 'savingsGoals' query on success."
        },
        {
          "path": "frontend/src/hooks/useGetSavingsGoals.ts",
          "operation": "create",
          "description": "Create React Query hook that calls actor.getSavingsGoals() to fetch the list of all savings goals. Return array of SavingsGoal objects with proper TypeScript typing."
        },
        {
          "path": "frontend/src/hooks/useUpdateSavingsGoal.ts",
          "operation": "create",
          "description": "Create React Query mutation hook that calls actor.updateSavingsGoal(index, amount) to add funds to a specific goal. Invalidate 'savingsGoals' and 'profile' queries on success to refresh balances."
        },
        {
          "path": "frontend/src/hooks/useRequestUnlock.ts",
          "operation": "create",
          "description": "Create React Query mutation hook that calls actor.requestUnlock(conditionType, goalIndex, periodDays) to attempt unlocking the digital locker. Handle boolean response and show appropriate success or error message to user. Invalidate 'lockerStatus' and 'savingsGoals' queries on success."
        },
        {
          "path": "frontend/src/hooks/useGetLockerStatus.ts",
          "operation": "create",
          "description": "Create React Query hook that calls actor.getLockerStatus() to fetch current digital locker state including locked status, unlock condition type, and unlock date if applicable."
        },
        {
          "path": "frontend/src/components/GoalCard.tsx",
          "operation": "create",
          "description": "Create reusable goal card component that displays goal name, progress bar, current/target amounts, deadline countdown, lock indicator, and action buttons (Top Up, Unlock). Apply consistent card styling with rounded corners."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Add route for SavingsGoalTracker at /goals. Wire navigation from bottom nav bar Goals tab to this route."
        }
      ]
    },
    {
      "id": "REQ-7",
      "summary": "Build Investment Suggestions screen with curated low-risk options and growth projections",
      "acceptanceCriteria": [
        "At least 3 investment suggestion cards are rendered.",
        "Each card shows: name, description, minimum amount, expected return range, risk badge.",
        "A projection table or chart shows growth for 1, 3, and 5 years using the user's monthly investment amount and compound interest formula.",
        "If monthly investment amount is ₹0, a prompt guides the user to adjust their allocation split."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/InvestmentSuggestions.tsx",
          "operation": "create",
          "description": "Create investment suggestions screen that fetches suggestions from getInvestmentSuggestions backend method. Display at least 3 curated investment option cards (Recurring Deposit, Public Provident Fund, Index Fund SIP). Each card shows name, description, minimum monthly amount, expected annual return range (e.g., 6-8%), and risk level badge ('Very Low' or 'Low'). Include projection table showing growth over 1, 3, and 5 years based on user's monthly investment allocation amount using compound interest formula. If investment allocation is ₹0, show prominent message guiding user to adjust allocation split via onboarding/settings. Use the authorization component to ensure user is authenticated."
        },
        {
          "path": "frontend/src/hooks/useGetInvestmentSuggestions.ts",
          "operation": "create",
          "description": "Create React Query hook that calls actor.getInvestmentSuggestions() to fetch the list of curated investment options. Return array of suggestion tuples [name, minimumAmount] with proper TypeScript typing."
        },
        {
          "path": "frontend/src/components/InvestmentCard.tsx",
          "operation": "create",
          "description": "Create reusable investment suggestion card component that displays option name, description, minimum amount, expected return range, and risk badge. Apply consistent card styling with rounded corners."
        },
        {
          "path": "frontend/src/components/ProjectionTable.tsx",
          "operation": "create",
          "description": "Create projection table component that calculates and displays investment growth over 1, 3, and 5 years using compound interest formula: FV = PV × (1 + r)^n, where PV is monthly investment × months, r is annual return rate / 12, n is number of months. Accept monthly amount and annual return rate as props."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Add route for InvestmentSuggestions at /invest. Wire navigation from bottom nav bar Invest tab to this route."
        }
      ]
    },
    {
      "id": "REQ-8",
      "summary": "Build Budget Calculator screen as standalone tool with instant calculations",
      "acceptanceCriteria": [
        "Calculator is accessible from the main navigation.",
        "Income input and three percentage sliders update all output values in real time.",
        "Daily spend limit updates automatically based on spending amount and current month's days.",
        "Sample category breakdown shows recommended allocation of spending amount across at least 4 categories.",
        "Calculator does not save data — it is a stateless tool."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/BudgetCalculator.tsx",
          "operation": "create",
          "description": "Create budget calculator component (stateless tool, no backend calls). Include hypothetical monthly income input and three allocation percentage sliders (Spending, Saving, Investment) that must sum to 100%. Display computed amounts for each category in real time. Calculate and show daily spend limit (spending amount / days in current month). Display sample monthly expense breakdown recommending allocation across at least 4 student categories: Food (40%), Transport (25%), Education (20%), Entertainment (15%). All calculations update instantly on input change. No data persistence — purely a frontend calculation tool."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Add route for BudgetCalculator at /calculator. Wire navigation from bottom nav bar Calculator tab to this route."
        }
      ]
    },
    {
      "id": "REQ-9",
      "summary": "Implement student-friendly visual theme with mobile-first design and bottom navigation",
      "acceptanceCriteria": [
        "All screens respect a max-width of 430px with centered layout on wider screens.",
        "Bottom navigation bar renders with 5 tabs: Dashboard, Expenses, Goals, Invest, Calculator.",
        "Active tab is visually highlighted.",
        "Color palette consistently uses green/teal primary tones with amber/red for warnings.",
        "All interactive elements (buttons, inputs) meet minimum 44px touch target size."
      ],
      "file_operations": [
        {
          "path": "frontend/src/index.css",
          "operation": "modify",
          "description": "Define student-friendly color palette with CSS custom properties: primary greens and teals (--color-primary-500: #14b8a6, --color-primary-600: #0d9488), warm accent colors for alerts (--color-warning: #f59e0b, --color-danger: #ef4444), and neutral grays. Add utility classes for card styling with rounded corners (.card: rounded-lg, shadow-sm, padding). Ensure all interactive elements meet 44px minimum touch target. Set global max-width constraint of 430px for mobile-first layout."
        },
        {
          "path": "frontend/tailwind.config.js",
          "operation": "modify",
          "description": "Extend Tailwind theme with custom colors matching the student-friendly palette: primary (teal shades), secondary (green shades), warning (amber), danger (red). Configure container max-width to 430px. Set minimum touch target sizes for buttons and interactive elements to 44px."
        },
        {
          "path": "frontend/src/components/BottomNavigation.tsx",
          "operation": "create",
          "description": "Create bottom navigation bar component with 5 tabs: Dashboard (/), Expenses (/expenses), Goals (/goals), Invest (/invest), Calculator (/calculator). Use React Router to detect active route and highlight the corresponding tab. Apply consistent styling with icons and labels. Ensure minimum 44px touch target for each tab. Position fixed at bottom of viewport on mobile."
        },
        {
          "path": "frontend/src/components/Layout.tsx",
          "operation": "create",
          "description": "Create main layout wrapper component that applies max-width constraint (430px, centered on wider screens), includes BottomNavigation component at bottom, and provides consistent padding and spacing for all child content. Reference generated logo frontend/public/assets/generated/logo.dim_256x256.png in the top header area."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Wrap all route components with Layout component to ensure consistent max-width, bottom navigation, and spacing across all screens."
        }
      ]
    }
  ]
}